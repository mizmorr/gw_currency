---

# GW Currency üí∏

–ú–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ **–∫–æ—à–µ–ª—å–∫–∞** –∏ **–æ–±–º–µ–Ω–Ω–∏–∫–∞ –≤–∞–ª—é—Ç**. –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, –∞ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ gRPC.

- **–°–µ—Ä–≤–∏—Å –∫–æ—à–µ–ª—å–∫–∞** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–º, –¥–µ–ø–æ–∑–∏—Ç–∞–º–∏ –∏ –≤—ã–≤–æ–¥–∞–º–∏ —Å—Ä–µ–¥—Å—Ç–≤.
- **–°–µ—Ä–≤–∏—Å –æ–±–º–µ–Ω–∞ –≤–∞–ª—é—Ç** ‚Äî –æ–±–º–µ–Ω –≤–∞–ª—é—Ç –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤.

## üöÄ –ó–∞–ø—É—Å–∫

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/mizmorr/gw_currency.git
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã –æ—Ç–¥–µ–ª—å–Ω–æ:

3. –î–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç gRPC. –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã  —Å–º. [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π grpc_exchange](https://github.com/mizmorr/grpc_exchange)

## üßë‚Äçüíª API —Å–µ—Ä–≤–∏—Å–∞ –∫–æ—à–µ–ª—å–∫–∞

### –ë–µ–∑ —Ç–æ–∫–µ–Ω–∞ JWT:

- **POST** `/api/v1/register` ‚Äî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **POST** `/api/v1/login` ‚Äî –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É.
- **POST** `/api/v1/refresh` ‚Äî –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞.

### –° —Ç–æ–∫–µ–Ω–æ–º JWT (–≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∑–∞—â–∏—â–µ–Ω—ã):

- **GET** `/api/v1/wallet/balance` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **POST** `/api/v1/wallet/deposit` ‚Äî –î–µ–ø–æ–∑–∏—Ç —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –∫–æ—à–µ–ª–µ–∫.
- **POST** `/api/v1/wallet/withdraw` ‚Äî –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ —Å –∫–æ—à–µ–ª—å–∫–∞.
- **GET** `/api/v1/exchange/rates` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç.
- **POST** `/api/v1/exchange` ‚Äî –û–±–º–µ–Ω –≤–∞–ª—é—Ç.

### –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Redis**: –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –∫–æ—à–µ–ª—å–∫–∞ –Ω–µ–¥–∞–≤–Ω–æ –æ–±—Ä–∞—â–∞–ª—Å—è –∫ —Å–µ—Ä–≤–∏—Å—É –æ–±–º–µ–Ω–∞ –≤–∞–ª—é—Ç, –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç –º–æ–≥—É—Ç –±—ã—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –∫—ç—à–µ Redis. –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∫—ç—à–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç—Å—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî 10 –º–∏–Ω—É—Ç).
- **JWT —Ç–æ–∫–µ–Ω—ã**:
  - **Access —Ç–æ–∫–µ–Ω** –¥–µ–π—Å—Ç–≤—É–µ—Ç 1 —á–∞—Å.
  - **Refresh —Ç–æ–∫–µ–Ω** –¥–µ–π—Å—Ç–≤—É–µ—Ç 24 —á–∞—Å–∞.
  - –í —Å–ª—É—á–∞–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è Access —Ç–æ–∫–µ–Ω–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Refresh —Ç–æ–∫–µ–Ω –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ Access —Ç–æ–∫–µ–Ω–∞, –µ—Å–ª–∏ Refresh —Ç–æ–∫–µ–Ω –µ—â–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω.

## üåç –°–µ—Ä–≤–∏—Å –æ–±–º–µ–Ω–∞ –≤–∞–ª—é—Ç

- –°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã–π —Ä–µ—Å—É—Ä—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç: [https://api.exchangerate-api.com](https://api.exchangerate-api.com).
- –í—Å–µ –≤–∞–ª—é—Ç—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ä—É–±–ª—è (RUB), –∏ —Å–µ—Ä–≤–∏—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç —Å –∑–∞–¥–∞–Ω–Ω—ã–º –ø–µ—Ä–∏–æ–¥–æ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç).
- –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Å —É—á–µ—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö —ç—Ç–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞.

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ API –¥–æ—Å—Ç—É–ø–Ω–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:  
[–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API](gw-currency-wallet/docs)

## üßë‚Äçüíª –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
curl -X POST "http://localhost:8080/api/v1/register" \
-H "Content-Type: application/json" \
-d '{"username": "newuser", "email": "newuser@example.com", "password": "password"}'
```

### –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

```bash
curl -X POST "http://localhost:8080/api/v1/login" \
-H "Content-Type: application/json" \
-d '{"username": "newuser", "password": "password"}'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞

```bash
curl -X GET "http://localhost:8080/api/v1/wallet/balance" \
-H "Authorization: Bearer <ACCESS_TOKEN>"
```

### –î–µ–ø–æ–∑–∏—Ç —Å—Ä–µ–¥—Å—Ç–≤

```bash
curl -X POST "http://localhost:8080/api/v1/wallet/deposit" \
-H "Authorization: Bearer <ACCESS_TOKEN>" \
-H "Content-Type: application/json" \
-d '{"amount": 1000, "currency": "USD"}'
```

## ‚ùå –û—à–∏–±–∫–∏ –∏ –∫–æ–¥—ã —Å—Ç–∞—Ç—É—Å–æ–≤

- **400 Bad Request** ‚Äî –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.
- **401 Unauthorized** ‚Äî –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ç–æ–∫–µ–Ω –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω.
- **403 Forbidden** ‚Äî –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è.
- **404 Not Found** ‚Äî –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω.

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   go mod tidy
   ```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏ JWT:
   - `DB_HOST`, `DB_PORT`, `DB_USER`, `DB_PASSWORD`, `DB_NAME`
   - `JWT_SECRET` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤

3. –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/swagger/*any`.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
go test ./...
```

---
